---
import { getCollection, type CollectionEntry } from 'astro:content'

import BlogIndex from '@/components/pages/BlogIndex.astro'
import BaseLayout from '@/layouts/BaseLayout.astro'

const posts = await getCollection('blog')
const sortedPosts = posts.toSorted(
  (a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) =>
    b.data.date.valueOf() - a.data.date.valueOf(),
)
---

<BaseLayout
  title="Blog - Aaron Qian"
  description="Software engineering insights, tutorials, and thoughts from Aaron Qian."
>
  <BlogIndex posts={sortedPosts} />
</BaseLayout>
