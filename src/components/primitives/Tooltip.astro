---
import type { HTMLAttributes } from 'astro/types'

import { cn } from '@/lib/utils'

export interface Props extends HTMLAttributes<'span'> {
  text: string
  position?: 'top' | 'bottom' | 'left' | 'right'
  class?: string
}

const { text, position = 'top', class: className, ...rest } = Astro.props

const positionClasses = {
  top: 'bottom-full left-1/2 -translate-x-1/2 mb-2',
  bottom: 'top-full left-1/2 -translate-x-1/2 mt-2',
  left: 'right-full top-1/2 -translate-y-1/2 mr-2',
  right: 'left-full top-1/2 -translate-y-1/2 ml-2',
}

const arrowClasses = {
  top: 'top-full left-1/2 -translate-x-1/2 border-t-content',
  bottom: 'bottom-full left-1/2 -translate-x-1/2 border-b-content',
  left: 'left-full top-1/2 -translate-y-1/2 border-l-content',
  right: 'right-full top-1/2 -translate-y-1/2 border-r-content',
}
---

<span class="group relative inline-flex" {...rest}>
  <slot />
  <span
    class={cn(
      'pointer-events-none absolute z-50 whitespace-nowrap rounded-md bg-content px-2 py-1 text-xs text-background opacity-0 transition-opacity group-hover:opacity-100',
      positionClasses[position],
      className,
    )}
    role="tooltip"
  >
    {text}
    <span class={cn('absolute h-0 w-0 border-4 border-transparent', arrowClasses[position])}></span>
  </span>
</span>
