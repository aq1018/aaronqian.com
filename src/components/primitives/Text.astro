---
import type { HTMLTag, Polymorphic } from 'astro/types'

import { textVariants } from './typography.cva'
import type { TextStyle } from './typography.cva'

import { cn } from '@/lib/utils'

export type Props<Tag extends HTMLTag = 'p'> = Polymorphic<{ as: Tag }> &
  TextStyle & {
    class?: string
  }

const {
  size,
  align,
  color,
  family,
  uppercase,
  strong,
  italic,
  strike,
  whitespace,
  truncate,
  transform,
  break: breakProp,
  line,
  preset,
  as: Element = 'p',
  class: className = '',
  ...rest
} = Astro.props

const classes = cn(
  textVariants({
    align,
    break: breakProp,
    color,
    family,
    italic,
    line,
    preset,
    size,
    strike,
    strong,
    transform,
    truncate,
    uppercase,
    whitespace,
  }),
  className,
)
---

<Element class={classes} {...rest}>
  <slot />
</Element>
