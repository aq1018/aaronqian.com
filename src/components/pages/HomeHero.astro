---
// Hero Section - Tech Lab meets Meditation Space
// Features: Digital analyzer with animated signal traces
import { Icon } from 'astro-icon/components'
import DigitalAnalyzer from '@/components/features/DigitalAnalyzer.astro'
import HeroContent from '@/components/ui/HeroContent.astro'
import Collapsible from '@/components/ui/Collapsible.astro'
import Button from '@/components/ui/Button.astro'
import Heading from '@/components/ui/Heading.astro'
import Text from '@/components/ui/Text.astro'
import Stack from '@/components/ui/Stack.astro'
---

<DigitalAnalyzer class="flex min-h-[85vh] items-center justify-center">
  <HeroContent eyebrow="Aaron Qian">
    <!-- Custom title with lightning bolt -->
    <Heading
      slot="title"
      level="h1"
      font="mono"
      weight="semibold"
      align="center"
      class="mb-8 whitespace-nowrap leading-tight"
    >
      Input coffee <button
        id="lightning-bolt"
        data-lightning-bolt
        class="inline-block cursor-pointer text-primary transition-all duration-200 ease-out motion-reduce:transition-none motion-reduce:transform-none"
        style="filter: brightness(0.7);"
        aria-label="Toggle secret message"
        aria-controls="secret-message"
        aria-expanded="false"
        data-collapsible-trigger="secret-message"
        type="button"
      >
        <Icon
          name="heroicons:bolt-solid"
          class="inline-block h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 lg:h-14 lg:w-14"
        />
      </button> Output code
    </Heading>

    <!-- Custom interactive content in default slot -->
    <Collapsible id="secret-message" class="mx-auto max-w-3xl">
      <Stack gap="tight">
        <div
          id="ascii-display"
          class="text-center font-mono text-lg text-primary"
          aria-live="polite"
          aria-atomic="true"
        >
          <span id="ascii-text"></span><span id="ascii-cursor" class="animate-cursor-blink">▊</span>
        </div>
        <div
          id="binary-display"
          class="text-center font-mono text-sm text-muted/70"
          aria-live="polite"
          aria-atomic="false"
        >
          <span id="binary-buffer"></span>
        </div>
      </Stack>
    </Collapsible>

    <Stack gap="tight" class="mt-8 mx-auto max-w-3xl">
      <Text variant="lead" align="center" class="sm:text-xl md:text-2xl">
        Welcome to my lab: caffeine-fueled commits, circuit boards, and questionable 3D prints.
      </Text>
      <Text variant="lead" align="center" class="sm:text-xl md:text-2xl">
        Safety goggles recommended. Coffee mandatory.
      </Text>
    </Stack>

    <Stack
      direction="horizontal"
      gap="small"
      class="mt-12 flex-col items-center justify-center sm:flex-row"
    >
      <Button href="/blog" variant="solid" color="primary" size="lg">
        <span>Read My Notes</span>
        <svg
          class="h-4 w-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
        </svg>
      </Button>

      <Button
        href="https://launchpath.com"
        variant="outline"
        color="primary"
        size="lg"
        external
        aria-label="Open LaunchPath (new tab)"
      >
        <span>LaunchPath →</span>
      </Button>
    </Stack>

    <!-- Micro-line in named slot - mt-8 since there are CTAs above -->
    <Text
      slot="microLine"
      as="div"
      variant="caption"
      font="mono"
      align="center"
      class="mt-8 text-muted/70"
    >
      <Stack direction="horizontal" gap="tight" class="inline-flex items-center justify-center">
        <span
          >Decoder controls: Click/Tap ⚡ or press <kbd
            id="keyboard-shortcut"
            class="rounded bg-muted/10 px-1.5 py-0.5 font-semibold text-muted">⌘K</kbd
          > to toggle.</span
        >
      </Stack>
    </Text>
  </HeroContent>
</DigitalAnalyzer>

<style>
  /* Cursor blink for ASCII display at 0.8 Hz (1.25s period) */
  @keyframes cursorBlink {
    0%,
    50% {
      opacity: 1;
    }
    51%,
    100% {
      opacity: 0;
    }
  }

  .animate-cursor-blink {
    animation: cursorBlink 1.25s ease-in-out infinite;
  }

  /* Mono uppercase utility for CTAs */
  .text-mono-upper {
    font-family: var(--font-mono);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
</style>
