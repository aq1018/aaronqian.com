---
/**
 * Creates diagonal angle guide lines from bottom center origin
 */

export interface Props {
  width: number
  height: number
  angleLineCount: number
  opacity: number
  strokeWidth: number
}

const { width, height, angleLineCount, opacity, strokeWidth } = Astro.props

const centerX = width / 2
const bottomY = height
const lineLength = Math.max(width, height) * 0.5

// Evenly distribute angles from 30째 to 150째 (avoiding extremes near x-axis)
const startAngle = 30
const endAngle = 150
const angleRange = endAngle - startAngle
const angles = Array.from(
  { length: angleLineCount },
  (_, i) => startAngle + (i * angleRange) / (angleLineCount - 1),
)

const lines = angles.map((angle) => {
  // Convert to radians (0째 = right, 90째 = up, etc.)
  const radians = (angle * Math.PI) / 180
  const endX = centerX + lineLength * Math.cos(radians)
  const endY = bottomY - lineLength * Math.sin(radians)
  return { startX: centerX, startY: bottomY, endX, endY }
})
---

{
  lines.map(({ startX, startY, endX, endY }) => (
    <line
      x1={startX}
      y1={startY}
      x2={endX}
      y2={endY}
      opacity={opacity}
      stroke-width={strokeWidth}
    />
  ))
}
