---
/**
 * ProjectList - Reusable project listing component
 * Grid-based layout with column headers on desktop
 * Semantic ul/li markup with Sheet styling
 */
import type { CollectionEntry } from 'astro:content'

import ProjectListItem from './ProjectListItem.astro'

import Grid from '@/components/primitives/Grid.astro'
import Heading from '@/components/primitives/Heading.astro'
import Stack from '@/components/primitives/Stack.astro'
import Text from '@/components/primitives/Text.astro'

type ProjectStatus = 'active' | 'planning' | 'done'

const statusStyles: Record<ProjectStatus, string> = {
  active: 'text-primary',
  done: 'text-content/60',
  planning: 'text-muted',
}

const statusLabels: Record<ProjectStatus, string> = {
  active: 'ACTIVE',
  done: 'DONE',
  planning: 'PLANNING',
}

export interface Props {
  projects: CollectionEntry<'projects'>[]
  footer?: string
}

const { projects, footer } = Astro.props

// Type-safe projects array for mapping
const typedProjects: CollectionEntry<'projects'>[] = projects
---

<Stack>
  <Grid spacing="md" class="hidden md:grid">
    <Grid size={4}>
      <Heading size="h6" class="tracking-wider uppercase"> Project </Heading>
    </Grid>
    <Grid size={2}>
      <Heading size="h6" class="text-right tracking-wider uppercase"> Status </Heading>
    </Grid>
    <Grid size={6}>
      <Heading size="h6" class="tracking-wider uppercase"> Description </Heading>
    </Grid>
  </Grid>

  <!-- Projects list -->
  <ul class="flex flex-col gap-3">
    {
      typedProjects.map((project) => {
        const status: ProjectStatus = project.data.status
        return (
          <ProjectListItem
            project={project}
            statusStyle={statusStyles[status]}
            statusLabel={statusLabels[status]}
          />
        )
      })
    }
  </ul>

  {footer != null && <Text color="muted">{footer}</Text>}
</Stack>
