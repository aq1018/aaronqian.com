---
/**
 * ProjectList - Reusable project listing component
 * Unified Sheet-based layout for all screen sizes
 * Used by both home page and projects index page
 */
import type { CollectionEntry } from 'astro:content'
import Sheet from '@/components/primitives/Sheet.astro'
import Link from '@/components/primitives/Link.astro'
import Badge from '@/components/primitives/Badge.astro'
import Stack from '@/components/primitives/Stack.astro'
import Text from '@/components/primitives/Text.astro'

interface Props {
  projects: CollectionEntry<'projects'>[]
  statusStyles: Record<string, string>
  statusLabels: Record<string, string>
  showFooter?: boolean
}

const { projects, statusStyles, statusLabels, showFooter = true } = Astro.props
---

<div>
  <!-- Projects list - unified layout -->
  <Stack space="sm">
    {
      projects.map((project) => (
        <Sheet
          variant="bar"
          color="neutral"
          padding="sm"
          hover
          class="grid gap-3 md:grid-cols-[2fr_auto_3fr] md:gap-6"
        >
          <div>
            <Link
              href={`/projects/${project.id.replace(/\/index(\.md)?$/, '')}`}
              class="font-semibold"
            >
              {project.data.title}
            </Link>
          </div>

          <div class="md:text-right">
            <span class={`font-bold uppercase tracking-wider ${statusStyles[project.data.status]}`}>
              {statusLabels[project.data.status]}
            </span>
            {project.data.live && (
              <Badge color="primary" pulse={true} class="ml-2">
                LIVE
              </Badge>
            )}
          </div>

          <div>
            <Text class="mb-2 leading-relaxed">{project.data.description}</Text>
            <Text size="xs" tone="muted" class="italic">
              {project.data.aside}
            </Text>
          </div>
        </Sheet>
      ))
    }
  </Stack>

  <!-- Footer -->
  {
    showFooter && (
      <div class="mt-8">
        <Text tone="muted">Updates monthly. Expect context switches.</Text>
      </div>
    )
  }
</div>
