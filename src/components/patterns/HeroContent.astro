---
/**
 * HeroContent - Reusable hero section content layout
 * Block-safe slot wrappers so consumers can pass complex markup.
 * - Eyebrow: small uppercase line above the title
 * - Title: main hero heading
 * - Description: subhead (a.k.a. "kicker" text under title)
 * - microLine: tiny helper line under everything
 *
 * Accessibility:
 * - When `title` prop is used → semantic <h1>
 * - When `title` slot is used (may contain blocks) → <div role="heading" aria-level="1">
 */

import Stack from '../primitives/Stack.astro'

import Container from '@/components/primitives/Container.astro'
import Heading from '@/components/primitives/Heading.astro'
import Text from '@/components/primitives/Text.astro'
import { cn } from '@/lib/utils'

export interface Props {
  eyebrow?: string
  title?: string
  description?: string
  microLine?: string
  centered?: boolean
  width?: 'narrow' | 'default' | 'wide'
  class?: string
}

const {
  eyebrow,
  title,
  description,
  microLine,
  centered = true,
  width = 'default',
  class: className,
} = Astro.props

const hasEyebrowSlot = Astro.slots.has('eyebrow')
const hasTitleSlot = Astro.slots.has('title')
const hasDescriptionSlot = Astro.slots.has('description')
const hasMicroLineSlot = Astro.slots.has('microLine')
---

<Container {width} class={cn(className)}>
  <Stack space="lg">
    {
      (hasEyebrowSlot || (eyebrow ?? '') !== '') && (
        <Text
          as="div"
          size="label-lg"
          color="primary"
          preset="kicker"
          align={centered ? 'center' : undefined}
        >
          {hasEyebrowSlot ? <slot name="eyebrow" /> : eyebrow}
        </Text>
      )
    }

    {
      (hasTitleSlot || (title ?? '') !== '') &&
        (hasTitleSlot ? (
          <Heading
            as="div"
            role="heading"
            aria-level="1"
            size="display-1"
            preset="hero"
            line="none"
            align={centered ? 'center' : undefined}
          >
            <slot name="title" />
          </Heading>
        ) : (
          <Heading
            as="h1"
            size="display-1"
            preset="hero"
            line="none"
            align={centered ? 'center' : undefined}
          >
            {title}
          </Heading>
        ))
    }

    {
      (hasDescriptionSlot || (description ?? '') !== '') &&
        (hasDescriptionSlot ? (
          <Text
            as="div"
            size="2xl"
            preset="note"
            line="normal"
            align={centered ? 'center' : undefined}
          >
            <slot name="description" />
          </Text>
        ) : (
          <Text as="div" size="xl" preset="note" align={centered ? 'center' : undefined}>
            {description}
          </Text>
        ))
    }

    <slot />

    {
      (hasMicroLineSlot || (microLine ?? '') !== '') && (
        <Text as="div" preset="note" align={centered ? 'center' : undefined} class="text-muted">
          {hasMicroLineSlot ? <slot name="microLine" /> : microLine}
        </Text>
      )
    }
  </Stack>
</Container>
